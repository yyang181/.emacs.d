# #+TITLE: 基于边缘检测的栏目分割模型
#+LATEX_CLASS: org-article
#+OPTIONS: toc:nil
* 基于传统计算机视觉的栏目分割模型
** 技术路线
边缘检测 - 直线检测 - 筛选策略 - 边界点确定 - 分割边界确定
** 具体实现
*** 对原始图像做边缘检测
#+DOWNLOADED: file:C%3A/Users/17186/Desktop/2.jpg @ 2019-10-24 11:01:29
[[file:%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9F%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%9A%84%E6%A0%8F%E7%9B%AE%E5%88%86%E5%89%B2%E6%A8%A1%E5%9E%8B/2019-10-24_11-01-29_2.jpg]]
*** 提取上图中的直线信息
将得到的一系列直线进行区域，角度的筛选，并进行排序，将符合要求的直线延长至图像边界，即可得到栏目分割的上边界点
#+DOWNLOADED: file:C%3A/Users/17186/Desktop/1.png @ 2019-10-24 11:01:25
[[file:%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9F%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%9A%84%E6%A0%8F%E7%9B%AE%E5%88%86%E5%89%B2%E6%A8%A1%E5%9E%8B/2019-10-24_11-01-25_1.png]]
*** 得到边界点之后做透视变换
将图中的4个角点作为输入，自定义矩形的4个角点作为输出，做透视变换
#+DOWNLOADED: file:C%3A/Users/17186/Desktop/6.png @ 2019-10-24 11:32:39
[[file:%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9F%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%9A%84%E6%A0%8F%E7%9B%AE%E5%88%86%E5%89%B2%E6%A8%A1%E5%9E%8B/2019-10-24_11-32-39_6.png]]

** 测试结果
目前只提取了图像顶部的两个边缘点，底部的边缘点为设置的固定值。
*** 育肥数据集 上部两个点为识别结果，下部为预设的定点
#+DOWNLOADED: file:C%3A/Users/17186/Desktop/5.png @ 2019-10-24 11:26:35
[[file:%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9F%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%9A%84%E6%A0%8F%E7%9B%AE%E5%88%86%E5%89%B2%E6%A8%A1%E5%9E%8B/2019-10-24_11-26-35_5.png]]

*** 保育数据集 上部两个点为识别结果，下部为预设的定点
#+DOWNLOADED: file:C%3A/Users/17186/Desktop/4.jpg @ 2019-10-24 11:06:23
[[file:%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9F%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E7%9A%84%E6%A0%8F%E7%9B%AE%E5%88%86%E5%89%B2%E6%A8%A1%E5%9E%8B/2019-10-24_11-06-23_4.jpg]]
* 存在的问题
1. 由于对图像做了透视变换，远景的个体会被放大，近景的个体会被缩小，如果近景的个体本身拍摄就被遮挡可能会在分割后的图片中丢失。
2. 保育数据集中，由于地板中存在大量很小的矩形空隙，会极大的影响栏杆侧的边缘检测的效果，甚至可能完全找不到组成栏杆的直线
* 下一步工作方向
1. 进一步优化构成边界的直线的筛选策略。
2. 对保育数据集的边缘检测进行效果增强（目前初步测试，对原始图像进行高斯模糊处理之后，能极大的缓解边缘检测信息缺失的问题）
3. 改写代码，将透视变换后的猪舍做成跟实际比例1:1的长宽比


#+DOWNLOADED: file:C%3A/Users/17186/Desktop/version2.0/2.png @ 2019-10-25 10:58:36
[[file:%E4%B8%8B%E4%B8%80%E6%AD%A5%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%90%91/2019-10-25_10-58-36_2.png]]

#+DOWNLOADED: file:C%3A/Users/17186/Desktop/version2.0/1.png @ 2019-10-25 10:58:32
[[file:%E4%B8%8B%E4%B8%80%E6%AD%A5%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%90%91/2019-10-25_10-58-32_1.png]]


